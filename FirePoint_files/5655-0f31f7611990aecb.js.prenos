"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5655],{5990:function(e,t,n){n.d(t,{H:function(){return r}});var i=n(27573),s=n(17886),l=n(87659);function r(e){let{children:t}=e;return(0,i.jsx)(s.Z,{tooltipContent:(0,i.jsxs)("div",{className:"max-w-48 p-1",children:[(0,i.jsx)("p",{className:"mb-2 whitespace-break-spaces text-xs tracking-tight",children:"This is an example project. Create a new project to work with your own documents."}),(0,i.jsx)(l.default,{href:"/projects/create",className:"text-accent-secondary-200 text-xs tracking-tight",children:"Create new project"})]}),children:t})}},52433:function(e,t,n){n.d(t,{W:function(){return d}});var i=n(27573),s=n(24658),l=n(11096),r=n(98099),a=n(74651),c=n(7653),o=n(27957);function d(e){let{isOpen:t,onClose:n,project:d}=e,[u,h]=(0,c.useState)(d.prompt_template),[x,p]=(0,c.useState)(!1),{addError:m}=(0,s.e)(),{mutateAsync:g}=(0,o.dY)({projectUuid:d.uuid}),f=async()=>{p(!0);try{await g({prompt_template:u}),n(),p(!1)}catch(e){m("Error saving instructions, please try again later"),p(!1)}},j=d.prompt_template.length>0&&0===u.length;return(0,i.jsxs)(a.ZP,{isOpen:t,onClose:n,modalSize:"md",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("h2",{className:"font-styrene-display text-xl font-medium",children:"Set project instructions"}),(0,i.jsxs)("p",{className:"text-text-300 text-sm",children:["Instruct Claude how to behave and respond for all of the chats within"," ",d.name,"."]})]}),(0,i.jsx)("div",{className:"mb-6 mt-3",children:(0,i.jsx)(r.Kx,{label:"How should Claude respond?",value:u,onChange:e=>h(e.target.value),placeholder:"Instruct Claude with prompts like: use a professional tone, use concise and simple wording, you are an expert in Astrophysics, etc.",minRows:6,required:!0,customScrollbar:!0,className:"max-h-60"})}),(0,i.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,i.jsx)(l.Z,{variant:"secondary",onClick:n,children:"Cancel"}),(0,i.jsxs)(l.Z,{loading:x,disabled:d.prompt_template===u,onClick:()=>{f()},children:[j?"Clear":"Save"," Instructions"]})]})]})}},69576:function(e,t,n){n.d(t,{U:function(){return J}});var i=n(27573),s=n(24658),l=n(11096),r=n(12068),a=n(99694),c=n(71473),o=n(98599),d=n(62124),u=n(3095),h=n(7653),x=n(48970),p=n(6274),m=n(86825),g=n(48814),f=n(17886),j=n(95166),v=n(11050),y=n(57908),b=n(82177);let w=e=>{let{file:t,canEditKnowledgeBase:n,isLoading:s,deleteFile:r,shouldHideDeleteButton:a,relativeFileLength:c,compressButton:o}=e,d="created_at"in t?t.created_at:null;return(0,i.jsxs)("div",{className:(0,y.Z)("group flex items-center gap-2 rounded-lg py-0.5 transition-colors lg:-ml-1.5 lg:-mr-1 lg:p-1",n&&"lg:hover:bg-bg-300"),children:[(0,i.jsx)(m.ZP,{file:t,size:"xs"}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsx)("div",{className:"mb-0.5 mt-1 line-clamp-1 break-all text-sm",children:(0,m.a9)(t.file_name)}),(0,i.jsxs)("div",{className:"text-text-400 flex items-center gap-1 text-xs",children:[!!d&&(0,i.jsx)(g.Z,{datetime:b.ou.fromISO(d)}),!!c&&(0,i.jsxs)(i.Fragment,{children:[!!d&&(0,i.jsx)("span",{className:"text-text-500/50 text-[6px]",children:"•"}),c]})]})]}),n&&(0,i.jsx)("div",{className:(0,y.Z)("transition-opacity group-has-[:focus-visible]/row:opacity-100 group-hover:opacity-100",s?"opacity-100":"lg:opacity-0"),children:s?(0,i.jsx)(j.U,{className:"animate-spin",size:18}):(0,i.jsxs)("div",{className:(0,y.Z)("transition-opacity",a?"opacity-0":"opacity-100"),children:[o,(0,i.jsx)(f.Z,{tooltipContent:"Remove",children:(0,i.jsx)(l.Z,{size:"icon_sm",variant:"ghost",disabled:s||a,onClick:r,"aria-label":"Remove from project knowledge",children:(0,i.jsx)(v.r,{size:16})})})]})})]})},N=e=>{let{doc:t,canEditKnowledgeBase:n,shouldHideDeleteButton:s=!1,compressButton:l}=e,{mutate:r,isLoading:a}=(0,x.ER)({projectUuid:t.project_uuid}),c=(0,h.useMemo)(()=>(function(e){let t={2e4:"Large file",6e4:"Very large file"},n=e.length,i=Object.keys(t).reverse();for(let e=0;e<i.length;e++)if(n>parseInt(i[e]))return t[i[e]]})(t.content),[t]),o=(0,h.useMemo)(()=>new TextEncoder().encode(t.content).length,[t]);return(0,i.jsx)(w,{file:{created_at:t.created_at,file_name:t.file_name,file_size:o,file_type:"",extracted_content:t.content},canEditKnowledgeBase:n,isLoading:a,shouldHideDeleteButton:s,relativeFileLength:c,deleteFile:()=>r({docUuid:t.uuid}),compressButton:l})},C=e=>{let{file:t,projectUuid:n,canEditKnowledgeBase:s,shouldHideDeleteButton:l=!1}=e,{mutate:r,isLoading:a}=(0,x.h4)({projectUuid:n});return(0,i.jsx)(w,{file:t,canEditKnowledgeBase:s,isLoading:a,shouldHideDeleteButton:l,deleteFile:()=>r({file_uuids:[t.file_uuid]})})};var S=n(33435),k=n(55722),E=n(2906),_=n(36222),U=n(76009),D=n(62973),I=n(72500),Z=n(96100),P=n(958),T=n(23428),A=n(35934),O=n(57385),F=n(15854),z=n(85285),L=n(84001),H=n(13789);function R(e){let{uri:t,isError:n,isLink:s=!1}=e;return(0,i.jsx)(L.$,{uri:t,isError:n,isLink:s,useDocumentHook:T.gQ,getDocumentUrl:H.v,defaultErrorTitle:"Outline"})}var B=n(81885),G=n(65291);function M(e){let{projectUuid:t,syncSource:n,isActionsHidden:s,canEditKnowledgeBase:l}=e,r=(0,A.mo)(),[c,o]=(0,h.useState)(!1),{type:d,status:{state:u,current_file_count:x},config:p}=n,m=(0,U.ir)(u);return(0,i.jsxs)("div",{className:(0,y.Z)("group flex flex-row items-center gap-2 rounded-lg px-0  lg:-ml-1.5 lg:-mr-1 lg:p-1 transition relative",l&&"lg:hover:bg-bg-300"),children:[(0,i.jsxs)("div",{className:"flex-1 inline-flex items-center gap-2",children:[(0,i.jsx)("div",{className:(0,y.Z)("relative inline-flex items-center shrink-0 justify-center h-10 w-10 m-0.5 border-0.5 border-border-300 rounded-lg",l&&"group-hover:border-border-200 group-hover:bg-bg-200"),children:(0,i.jsx)(B.j0,{type:d,size:24,variant:B.cT.DOCS,isError:m})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-sm line-clamp-1 break-all",children:d===a.F.GITHUB?(0,i.jsx)(z.d,{config:p,isError:m}):d===a.F.GDRIVE?(0,i.jsx)(O.C,{uri:p.uri,isError:m,isLink:u!==a.c.UNAUTHENTICATED}):d===a.F.OUTLINE?(0,i.jsx)(R,{uri:p.outline_uri,isError:m,isLink:u!==a.c.UNAUTHENTICATED}):null}),(0,i.jsxs)("div",{className:"flex flex-row gap-1 text-xs text-text-400",children:[(0,i.jsx)("span",{className:"line-clamp-1",children:(0,i.jsx)(G.w,{syncSource:n})}),!!x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-text-500/50 text-[6px] hidden sm:inline",children:"•"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:(0,_.M0)(x,"file")})]})]})]})]}),!s&&(0,i.jsx)(K,{isError:m,canRefresh:n.type===a.F.GITHUB,onEdit:n.type===a.F.GITHUB?()=>o(!0):void 0,projectUuid:t,syncSource:n}),n.type===a.F.GITHUB&&(0,i.jsx)(F.U,{isOpen:c,onClose:()=>o(!1),tokenLimit:r,projectUuid:t,syncSource:n})]})}function K(e){let{isError:t,canRefresh:n,onEdit:r,projectUuid:a,syncSource:c}=e,{mutateAsync:o}=(0,p.zB)({projectUuid:a}),{isUpdating:d,isFailing:u,handleUpdate:x}=function(e){let{projectUuid:t,syncSource:n}=e,[i,l]=(0,h.useState)(!1),{addSuccess:r}=(0,s.e)(),{mutate:a}=(0,p.l2)({projectUuid:t},{onSuccess:()=>{r("Update enqueued")}});(0,h.useEffect)(()=>{l(!1)},[n.status]);let c=(0,T.sf)(n)||i,o=(0,T.xm)(n),d=(0,h.useCallback)(()=>{c||(l(!0),a({sync_source_uuid:n.uuid,sync_source_config:n.config}))},[c,a,n.config,n.uuid]);return{isUpdating:c,isFailing:o,handleUpdate:d}}({projectUuid:a,syncSource:c});return(0,i.jsxs)("div",{className:(0,y.Z)("h-full lg:pl-4 lg:absolute flex items-center lg:pr-2 right-0 rounded-md lg:bg-gradient-to-l from-bg-200 from-80% group-hover:from-bg-300 transition-all lg:opacity-0 group-hover:opacity-100 group-has-[:focus-visible]/row:opacity-100",d&&"lg:opacity-100"),children:[!t&&n&&(0,i.jsx)(f.Z,{tooltipContent:d?"Syncing...":u?"Sync failed. Click to retry":"Sync now",children:(0,i.jsx)(l.Z,{variant:"ghost",size:"icon_sm",onClick:x,children:d?(0,i.jsx)(D.t,{className:"animate-spin"}):u?(0,i.jsx)(I.v,{}):(0,i.jsx)(D.t,{})})}),!t&&r&&(0,i.jsx)(f.Z,{tooltipContent:"Configure files",children:(0,i.jsx)(l.Z,{variant:"ghost",size:"icon_sm",onClick:r,children:(0,i.jsx)(Z.X,{})})}),(0,i.jsx)(f.Z,{tooltipContent:"Remove",children:(0,i.jsx)(l.Z,{variant:"ghost",size:"icon_sm",onClick:()=>o(c.uuid),children:(0,i.jsx)(P.r,{})})})]})}n(88075);var V=n(98219);let Y="project_syncs",q="project_docs",$="project_linked_files";function J(e){let{project:t,canEditKnowledgeBase:n=!1,isUploadingDoc:s=!1,isUploadingDriveSync:a=!1,isUploadingOutlineSync:o=!1,isUploadingGithubSync:h=!1,setIsUploadingDoc:x,setIsUploadingDriveSync:p,setIsUploadingOutlineSync:m,setIsUploadingGithubSync:g,maxItems:f,onViewAll:j,onClickProjectDoc:v}=e,{githubSyncSources:y,driveSyncSources:b,outlineSyncSources:w,projectDocs:S,linkedFiles:k,isFetchingKnowledge:_,knowledgeCount:U}=W({projectUuid:t.uuid,maxItems:f}),{isDeleting:D,selectedItems:I,handleSelect:Z,selectAllItems:P,isInSelectionMode:T,toggleSelectMode:A,handleDeleteSelected:O}=X({githubSyncSources:y,driveSyncSources:b,outlineSyncSources:w,projectDocs:S,linkedFiles:k,projectUuid:t.uuid,isEnabled:n});Q({clearUploadingState:()=>null==x?void 0:x(!1),numItems:S.length+k.length}),Q({clearUploadingState:()=>null==g?void 0:g(!1),numItems:y.length}),Q({clearUploadingState:()=>null==p?void 0:p(!1),numItems:b.length}),Q({clearUploadingState:()=>null==m?void 0:m(!1),numItems:w.length});let F={isInSelectionMode:T,canEditKnowledgeBase:n},z=new Set(I.map(e=>{let{uuid:t}=e;return t}));return _?(0,i.jsx)(r.Z,{height:65,className:"opacity-25 rounded-lg mb-3 mt-3"}):0===U?(0,i.jsx)(ee,{canEditKnowledgeBase:n}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.M,{children:n&&(0,i.jsx)(u.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,i.jsx)(V.n,{projectUuid:t.uuid})})}),(0,i.jsx)("ul",{className:"flex flex-col py-1",children:(0,i.jsxs)(d.M,{initial:!1,children:[(0,i.jsx)(en,{isShown:a},"drive-skeleton-loader"),b.map(e=>(0,i.jsx)(et,{isSelected:z.has(e.uuid),...F,handleSelect:(t,n)=>Z({uuid:e.uuid,type:Y},t,n),children:(0,i.jsx)(M,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:n,isActionsHidden:T||!n})},e.uuid)),(0,i.jsx)(en,{isShown:o},"outline-skeleton-loader"),w.map(e=>(0,i.jsx)(et,{isSelected:z.has(e.uuid),...F,handleSelect:(t,n)=>Z({uuid:e.uuid,type:Y},t,n),children:(0,i.jsx)(M,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:n,isActionsHidden:T||!n})},e.uuid)),(0,i.jsx)(en,{isShown:h},"github-skeleton-loader"),y.map(e=>(0,i.jsx)(et,{isSelected:z.has(e.uuid),...F,handleSelect:(t,n)=>Z({uuid:e.uuid,type:Y},t,n),children:(0,i.jsx)(M,{projectUuid:t.uuid,syncSource:e,canEditKnowledgeBase:n,isActionsHidden:T||!n})},e.uuid)),(0,i.jsx)(en,{isShown:s},"doc-skeleton-loader"),S.map(e=>(0,i.jsx)(et,{isSelected:z.has(e.uuid),...F,handleSelect:(t,n)=>Z({uuid:e.uuid,type:q},t,n),className:v?"cursor-pointer":void 0,handleClick:()=>null==v?void 0:v(e.uuid),children:(0,i.jsx)(N,{doc:e,canEditKnowledgeBase:n,shouldHideDeleteButton:T,compressButton:void 0})},e.uuid)),k.map(e=>(0,i.jsx)(et,{isSelected:z.has(e.file_uuid),...F,handleSelect:(t,n)=>Z({uuid:e.file_uuid,type:$},t,n),children:(0,i.jsx)(C,{file:e,projectUuid:t.uuid,canEditKnowledgeBase:n,shouldHideDeleteButton:T})},e.file_uuid)),(0,i.jsx)(d.M,{children:T&&(0,i.jsx)(u.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-auto",children:(0,i.jsx)("div",{className:"flex mt-3 gap-2 justify-end",children:(0,i.jsx)(E.J,{isLoading:D,numSelected:I.length,totalNumItems:U,handleSelectAll:P,handleCancel:()=>A(!1),handleDeleteSelected:O})})},"item-management-menu")})]})}),!!j&&!!f&&U>f&&(0,i.jsx)("div",{children:(0,i.jsxs)(l.Z,{variant:"unstyled",onClick:j,className:"hover:text-text-000 hover:underline !px-0 text-sm",children:["View all ",U," files",(0,i.jsx)(c.o,{size:16,className:"inline-block pl-1"})]})})]})}let Q=e=>{let{clearUploadingState:t,numItems:n}=e,i=(0,h.useRef)(n);(0,h.useEffect)(()=>{n>i.current&&t(),i.current=n},[n,t])},W=e=>{let{projectUuid:t,maxItems:n}=e,{data:i=[],isLoading:s}=(0,x.Kf)({projectUuid:t}),{data:l=[],isLoading:r}=(0,p.yg)(t),{data:c=[]}=(0,x.pK)({projectUuid:t}),o=l.filter(e=>{let{type:t}=e;return t===a.F.GDRIVE}),d=l.filter(e=>{let{type:t}=e;return t===a.F.OUTLINE}),u=l.filter(e=>{let{type:t}=e;return t===a.F.GITHUB});if(n){let e=n;[o,d,u,i,c].forEach(t=>{t.splice(e),e=Math.max(0,e-t.length)})}let h=[i,l,c].reduce((e,t)=>{var n;return e+(null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0)},0);return{driveSyncSources:o,outlineSyncSources:d,githubSyncSources:u,projectDocs:i,linkedFiles:c,isFetchingKnowledge:s||r,knowledgeCount:h}},X=e=>{let{githubSyncSources:t,driveSyncSources:n,outlineSyncSources:i,projectDocs:l,linkedFiles:r,projectUuid:a,isEnabled:c}=e,o=n.map(e=>{let{uuid:t}=e;return{type:Y,uuid:t}}).concat(t.map(e=>{let{uuid:t}=e;return{type:Y,uuid:t}})).concat(i.map(e=>{let{uuid:t}=e;return{type:Y,uuid:t}})).concat(l.map(e=>{let{uuid:t}=e;return{type:q,uuid:t}})).concat(r.map(e=>{let{file_uuid:t}=e;return{type:$,uuid:t}})),{selectedItems:d,handleSelect:u,selectAllItems:h,isInSelectionMode:m,toggleSelectMode:g}=(0,S.M)(o,!c),{addError:f}=(0,s.e)(),{mutateAsync:j,isLoading:v}=(0,p.IP)({projectUuid:a}),{mutateAsync:y,isLoading:b}=(0,x.op)({projectUuid:a}),{mutateAsync:w,isLoading:N}=(0,x.h4)({projectUuid:a}),C=async()=>{let e=d.filter(e=>{let{type:t}=e;return t===q}),t=d.filter(e=>{let{type:t}=e;return t===Y}),n=d.filter(e=>{let{type:t}=e;return t===$});g(!1);try{await Promise.all([e.length?y({doc_uuids:e.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),t.length?j({sync_source_uuids:t.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve(),n.length?w({file_uuids:n.map(e=>{let{uuid:t}=e;return t})}):Promise.resolve()])}catch(e){f("Something went wrong while deleting. Refresh the page and try again")}};return{isDeleting:b||v||N,selectedItems:d,handleSelect:u,selectAllItems:h,isInSelectionMode:m,toggleSelectMode:g,handleDeleteSelected:C}},ee=e=>{let{canEditKnowledgeBase:t}=e;return(0,i.jsxs)("div",{className:"bg-bg-500/10 text-text-400 mb-1 mt-2 flex w-full flex-col items-center gap-3 rounded-lg px-6 pb-10 pt-8 text-center text-sm",children:[(0,i.jsx)(o.g,{size:36,weight:"thin"}),t?"No knowledge added yet. Add PDFs, documents, or other text to the project knowledge base that Claude will reference in every project conversation.":"No knowledge added yet."]})};function et(e){let{handleSelect:t,isSelected:n,isInSelectionMode:s,canEditKnowledgeBase:l,className:r,handleClick:a,children:c}=e;return(0,i.jsx)(u.E.li,{initial:{height:0,opacity:0},exit:{height:0,opacity:0},animate:{height:"auto",opacity:1},children:(0,i.jsx)(k.f,{itemName:"content",isSelected:n,checkboxOffset:"-left-4",isInSelectionMode:s,hiddenAndDisabled:!l,handleSelect:t,children:(0,i.jsx)("div",{className:r,onClick:a,children:c})})})}function en(e){let{isShown:t}=e;return t?(0,i.jsx)(u.E.li,{className:"flex items-center overflow-hidden",initial:{height:0,opacity:0},animate:{height:"3rem",opacity:1},children:(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2 w-full",children:[(0,i.jsx)(r.Z,{className:"opacity-25 rounded-lg h-48 shrink-0",height:40,width:40}),(0,i.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,i.jsx)(r.Z,{className:"opacity-25 rounded-lg",height:12,width:"50%"}),(0,i.jsx)(r.Z,{className:"opacity-25 rounded-lg",height:12,width:"90%"})]})]})},0):null}},98219:function(e,t,n){n.d(t,{n:function(){return H},l:function(){return T}});var i=n(27573),s=n(98635),l=n(49456),r=n(88075),a=n(24658),c=n(11096),o=n(61814),d=n(98099),u=n(74651),h=n(17886),x=n(84115),p=n(44846),m=n(49793),g=n(99694),f=n(84344),j=n(47787),v=n(95014),y=n(90067),b=n(72834),w=n(83056),N=n(57908),C=n(7653),S=n(48970),k=n(27957),E=n(23428),_=n(35934),U=n(40047),D=n(15854),I=n(64965);n(12068),n(6274);var Z=n(81885),P=n(5990);let T=e=>{let{projectUuid:t,isStarterProject:n,isUploading:c,setIsUploadingDoc:o,setIsUploadingGithubSync:d,setIsUploadingDriveSync:u,setIsUploadingOutlineSync:h}=e,{activeOrganization:x}=(0,r.t)(),g=null==x?void 0:x.uuid,f=(0,C.useRef)(null),[j,v]=(0,C.useState)(""),[y,b]=(0,C.useState)(""),[N,U]=(0,C.useState)(!1),[I,Z]=(0,C.useState)(!1),[P,T]=(0,C.useState)(!1),{addError:O}=(0,a.e)(),{mutateAsync:F}=(0,S.u3)({projectUuid:t},{onError:()=>o(!1)}),{data:z}=(0,k.Yc)({projectUuid:t}),{isGithubAuthenticated:H,initGithubAuth:R}=(0,E.Yn)({callerIdentifier:"project",handleSuccess:()=>Z(!0)}),B=(0,E.P8)(),{isOutlineAuthenticated:G}=(0,E.vc)(),M=(0,E.J$)(),K=(0,E.E4)(),V=(0,_.nR)(t),Y=(0,_.mo)(),q=(null!=V?V:0)>Y,$=(0,w.useQueryClient)(),J=(0,C.useCallback)(async(e,n)=>{for(let t of e)await F({file_name:t.file_name,content:t.extracted_content});n.length&&$.invalidateQueries([m.jb,{orgUuid:g,projectUuid:t}])},[F,g,t,$]),{value:Q}=(0,p.F)("ooc_attachments"),{handleUpload:W}=(0,s.Vn)({imagesEnabled:!1,blobFileUploadsEnabled:Q,rasterizePdfUploadsEnabled:!1,onUploadComplete:async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];await J(...t)},onError:()=>{o(!1)},projectUuid:t}),X=(0,C.useCallback)(async e=>{let t=e.target.files;t&&(o(!0),await W(Array.from(t),Y-(null!=V?V:0)),o(!1)),e.target.value=""},[W,o,V,Y]),ee=async()=>{try{U(!1),o(!0),await F({file_name:y,content:j}),b(""),v("")}catch(e){o(!1),O("Error saving text content")}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{"data-testid":"project-doc-upload",ref:f,type:"file",className:"hidden",accept:(0,l.tB)({imagesEnabled:!1}).join(","),onChange:X,multiple:!0}),(0,i.jsx)(A,{projectUuid:t,shouldShowGithubSyncSource:B,shouldShowDriveSyncSource:K,shouldShowOutlineSyncSource:M,handleGithubClick:()=>{if(H){Z(!0);return}R()},handleOutlineClick:()=>{G?T(!0):O((0,i.jsxs)("div",{className:"flex flex-col items-start",children:[(0,i.jsx)("div",{children:"You need to connect to Outline before using this feature."}),(0,i.jsx)("button",{onClick:()=>{window.location.href="/settings/profile"},className:"mt-2 underline",children:"Connect to Outline"})]}))},handleFileUploadClick:()=>{f.current&&f.current.click()},handleTextContentClick:()=>U(!0),isPrivateProject:!!(null==z?void 0:z.is_private),isStarterProject:n,isOverProjectKnowledgeLimit:q,isLoading:c,setIsUploadingDriveSync:u}),(0,i.jsx)(L,{isOpen:N,onClose:()=>U(!1),title:y,setTitle:b,content:j,setContent:v,onSave:ee}),B&&(0,i.jsx)(D.U,{isOpen:I,onClose:()=>Z(!1),projectUuid:t,tokenLimit:Y,setIsUploadingGithubSync:d}),M&&""]})},A=e=>{let{projectUuid:t,shouldShowGithubSyncSource:n,shouldShowDriveSyncSource:s,handleGithubClick:l,handleFileUploadClick:r,handleTextContentClick:a,isPrivateProject:c,isStarterProject:d,isOverProjectKnowledgeLimit:u,isLoading:h,shouldShowOutlineSyncSource:x,handleOutlineClick:p,setIsUploadingDriveSync:m}=e,[j,v]=(0,C.useState)(!1),[b,w]=(0,C.useState)(!1),N=s||n;return(0,i.jsxs)(o.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,i.jsx)(O,{isStarterProject:d,isOverProjectKnowledgeLimit:u,isLoading:h}),open:j,onOpenChange:v,children:[(0,i.jsxs)("div",{onFocus:()=>{w(!1)},children:[(0,i.jsx)(o.hP,{onClick:r,className:"text-left",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(y.p,{size:16})," Upload from device"]})}),(0,i.jsx)(o.hP,{onClick:a,className:"text-left",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(f.P,{size:16}),"Add text content"]})}),N?(0,i.jsx)(o.u2,{}):null,n&&(0,i.jsx)(F,{type:g.F.GITHUB,isPrivateProject:c,onClick:l})]}),s&&(0,i.jsx)(z,{projectUuid:t,isPrivateProject:c,setIsUploadingDriveSync:m,isOpen:b,setIsOpen:w,setIsParentDropdownOpen:v}),x&&(0,i.jsx)(F,{type:g.F.OUTLINE,isPrivateProject:c,onClick:p})]})},O=(0,C.forwardRef)((e,t)=>{let{isStarterProject:n,isOverProjectKnowledgeLimit:s,isLoading:l,...r}=e,a=(0,i.jsx)(c.Z,{...r,ref:t,className:"!text-accent-secondary-100 gap-1.5 !rounded-lg flex items-center -mr-2 px-2 py-1 text-sm font-medium tracking-tight",variant:"ghost",size:"inline",disabled:n||s||l,loading:l,prepend:(0,i.jsx)(j.v,{size:16,weight:"bold"}),children:"Add Content"});return n?(0,i.jsx)(P.H,{children:(0,i.jsx)("div",{children:a})}):s?(0,i.jsx)(h.Z,{side:"bottom",tooltipContent:"Project knowledge at capacity. Remove an existing file in order to add to knowledge",children:(0,i.jsx)("div",{children:a})}):a});O.displayName="ProjectDocUploaderDropdownTrigger";let F=e=>{let{type:t,isPrivateProject:n,isSubTrigger:s=!1,isSubDropdownOpen:l=!1,onClick:r}=e,a=s?o.WR:o.hP,c=(0,i.jsxs)(a,{onClick:r,onPointerLeave:e=>{s&&l&&e.preventDefault()},onPointerMove:e=>{s&&l&&e.preventDefault()},disabled:!n,className:"text-left",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(Z.j0,{type:t,size:16}),(0,U.DH)(t)]}),s&&(0,i.jsx)(v.T,{size:16})]});return n?c:(0,i.jsx)(h.Z,{side:"left",tooltipContent:"Only accessible from private projects",children:(0,i.jsx)("div",{children:c})})},z=e=>{let{projectUuid:t,isPrivateProject:n,setIsUploadingDriveSync:s,isOpen:l,setIsOpen:r,setIsParentDropdownOpen:a}=e,{isDriveAuthenticated:c,initDriveAuth:d}=(0,E.nC)({callerIdentifier:"project"});return c?(0,i.jsxs)(o.Vy,{open:l,onOpenChange:r,children:[(0,i.jsx)(F,{type:g.F.GDRIVE,isPrivateProject:n,isSubTrigger:!0,isSubDropdownOpen:l}),(0,i.jsx)(o.nI,{children:(0,i.jsx)(I.C,{projectUuid:t,isSubDropdown:!0,setIsUploadingDriveSync:s,isOpen:l,setIsOpen:r,setIsWholeDropdownOpen:e=>{r(e),a(e)},shouldAddSyncUponPaste:!0})})]}):(0,i.jsx)(F,{type:g.F.GDRIVE,isPrivateProject:n,onClick:()=>{c||d()}})},L=e=>{let{isOpen:t,onClose:n,title:s,setTitle:l,content:r,setContent:a,onSave:o}=e,h=(0,C.useRef)(null);return(0,x.p)({shouldFocus:t,target:h}),(0,i.jsx)(u.ZP,{isOpen:t,onClose:n,modalSize:"xl",className:"p-7 pt-6",children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),""!==s.trim()&&""!==r.trim()&&o()},children:[(0,i.jsx)("h2",{className:"font-tiempos mb-3 text-xl",children:"Add text content"}),(0,i.jsx)(d.oi,{ref:h,placeholder:"Name your content",className:"mb-2 w-full",size:"lg",label:"Title",value:s,onChange:e=>l(e.target.value),required:!0}),(0,i.jsx)(d.Kx,{placeholder:"Type or paste in content...",label:"Content",minRows:12,value:r,onChange:e=>a(e.target.value),required:!0,className:"max-h-[50vh] overflow-y-auto"}),(0,i.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,i.jsx)(c.Z,{variant:"secondary",onClick:e=>{e.preventDefault(),n()},children:"Cancel"}),(0,i.jsx)(c.Z,{type:"submit",children:"Add Content"})]})]})})},H=e=>{let{size:t="default",projectUuid:n,description:s,tooltipContent:l}=e,r=(0,_.nR)(n),a=(0,_.mo)();if(!r)return null;let o=Math.ceil(r/a*100),d=o>80&&o<100,u=o>=100;return(0,i.jsxs)("div",{className:(0,N.Z)("default"===t?"mt-3":"flex items-center gap-3"),children:[(0,i.jsx)("div",{className:(0,N.Z)("bg-bg-300 rounded-full p-0.5","small"===t&&"w-24"),children:(0,i.jsx)("div",{style:{width:"".concat(Math.min(100,o),"%")},className:(0,N.Z)("h-1 rounded-full transition-all",!d&&!u&&"bg-accent-secondary-100",d&&"bg-warning-orange",u&&"bg-danger-100")})}),(0,i.jsxs)("div",{className:(0,N.Z)("flex gap-2 items-center text-xs","default"===t&&"mt-2"),children:[(0,i.jsxs)("div",{className:(0,N.Z)("flex-1",o<100&&"text-text-400",o>=100&&"text-danger-100 font-medium"),children:[o,"% of ",null!=s?s:"knowledge capacity used"]}),(0,i.jsx)(h.Z,{className:"text-center mt-0.5",side:"left",tooltipContent:null!=l?l:"Project knowledge is currently limited to Claude's maximum context window size.",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(c.Z,{size:"unset",variant:"ghost",href:"https://support.anthropic.com/en/articles/9517075-what-are-projects",target:"_blank",className:"rounded-full",children:(0,i.jsx)(b.k,{size:16})})})})]}),o>=100&&(0,i.jsx)("div",{className:"text-text-400 text-xs",children:"Remove an existing file in order to add to knowledge"})]})}},40047:function(e,t,n){n.d(t,{DH:function(){return s}});var i=n(99694);let s=e=>{switch(e){case i.F.GITHUB:return"GitHub";case i.F.GDRIVE:return"Google Drive";case i.F.OUTLINE:return"Outline"}}},33435:function(e,t,n){n.d(t,{M:function(){return s}});var i=n(7653);let s=(e,t)=>{let[n,s]=(0,i.useState)(!1),[l,r]=(0,i.useState)([]),a=(n,i)=>{t||r(t=>{if(!i||0===Object.keys(t).length)return[...t,n];let s=t[Object.keys(t).length-1],l=e.findIndex(e=>{let{uuid:t,type:n}=e;return t===s.uuid&&n===s.type});if(-1===l)return[...t,n];let r=e.findIndex(e=>{let{uuid:t}=e;return t===n.uuid}),a=e.slice(Math.min(l+1,r),Math.max(l-1,r)+1),c=t.map(e=>{let{uuid:t}=e;return t});return[...t,...a.filter(e=>{let{uuid:t}=e;return -1===c.indexOf(t)})]})},c=e=>{t||r(t=>t.filter(t=>{let{uuid:n,type:i}=t;return n!==e.uuid||i!==e.type}))};return(0,i.useEffect)(()=>{s(l.length>0)},[l]),{selectedItems:l,handleSelect:(e,n,i)=>{t||(n?a(e,i):c(e))},selectAllItems:()=>{t||r(e)},isInSelectionMode:!t&&n,toggleSelectMode:e=>{s(e),e||r([])}}}},55722:function(e,t,n){n.d(t,{f:function(){return a}});var i=n(27573),s=n(60240),l=n(17886),r=n(57908);function a(e){let{itemName:t,isInSelectionMode:n,isSelected:a,handleSelect:c,checkboxOffset:o,children:d,hiddenAndDisabled:u=!1}=e;return(0,i.jsxs)("div",{className:"relative group/row",children:[u?null:(0,i.jsx)("div",{className:(0,r.Z)("p-1 absolute z-10 top-1/2 -translate-y-1/2 -translate-x-1/2 transition duration-100 ",o,!n&&" opacity-0 scale-75 group-has-[:focus-visible]/row:opacity-100 group-has-[:focus-visible]/row:scale-100 group-hover/row:opacity-100 group-hover/row:scale-100"),children:(0,i.jsx)(l.Z,{tooltipContent:a?"Deselect ".concat(t):"Select ".concat(t),className:"pointer-events-none",children:(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{disabled:u,checked:a,onChange:c,label:"Select ".concat(t),hideLabel:!0})})})}),d]})}},2906:function(e,t,n){n.d(t,{J:function(){return l}});var i=n(27573),s=n(11096);n(7653);let l=e=>{let{isLoading:t,numSelected:n,totalNumItems:l,handleSelectAll:r,handleCancel:a,handleDeleteSelected:c}=e;return(0,i.jsxs)(i.Fragment,{children:[n<l&&(0,i.jsx)(s.Z,{variant:"underline",className:"text-sm rounded-md text-accent-secondary-000 mr-2 !opacity-100 h-8",size:"unset",onClick:r,children:"Select all"}),(0,i.jsx)(s.Z,{size:"sm",variant:"secondary",onClick:a,children:"Cancel"}),(0,i.jsxs)(s.Z,{size:"sm",variant:"danger",disabled:0===n,onClick:c,loading:t,children:["Delete ",(0,i.jsx)("span",{className:"max-sm:hidden",children:"\xa0Selected"})]})]})}},85285:function(e,t,n){n.d(t,{d:function(){return s}});var i=n(27573);function s(e){let{isError:t,config:n}=e;return t?"GitHub":(0,i.jsxs)("p",{children:[n.owner,(0,i.jsx)("span",{className:"opacity-25 px-0.5",children:"/"}),n.repo,(0,i.jsx)("span",{className:"border-0.5 bg-bg-200 font-mono text-text-300 border-border-200 px-0.5 rounded ml-1.5 text-xs hidden sm:inline",children:n.branch})]})}},65291:function(e,t,n){n.d(t,{w:function(){return d}});var i=n(27573),s=n(48814),l=n(17886),r=n(76009),a=n(99694),c=n(82177),o=n(23428);function d(e){let{syncSource:t}=e,n=(0,o.lP)(),{state:d,last_synced_at:u}=t.status;switch(d){case a.c.CREATED:case a.c.PENDING:case a.c.UPDATING:return(0,i.jsx)("span",{children:"Syncing..."});case a.c.FAILED:case a.c.UPDATE_FAILED:return(0,i.jsx)("span",{className:"text-danger-100",children:"Failed"});case a.c.READY:return u?(0,i.jsxs)("span",{children:["Last synced"," ",(0,i.jsx)(s.Z,{datetime:c.ou.fromISO(u)})]}):(0,i.jsx)("span",{children:"Ready"});case a.c.UNAUTHENTICATED:return(0,i.jsxs)("span",{className:"text-danger-100",children:["You are not authenticated."," ",(0,i.jsx)("button",{className:"underline",onClick:()=>n(t.type),children:"Authenticate"})]});case a.c.ACCESS_DENIED:return(0,i.jsxs)("span",{className:"text-danger-100",children:["Access denied, request via ",r.X_[t.type]]});case a.c.DISABLED:return(0,i.jsx)(l.Z,{tooltipContent:r.p5,children:(0,i.jsx)("span",{className:"text-danger-100",children:"Content not accessible"})})}}},95722:function(e,t,n){n.d(t,{p:function(){return r}});var i=n(27573),s=n(11096),l=n(74651);let r=e=>{let{isOpen:t=!1,onClose:n,onConfirm:r,modalTitle:a="Delete chat?",modalText:c="Are you sure you want to delete this chat?"}=e;return(0,i.jsxs)(l.ZP,{title:a,isOpen:t,onClose:n,children:[(0,i.jsx)("div",{className:"mt-1",children:c}),(0,i.jsxs)(l.dm,{children:[(0,i.jsx)(s.Z,{variant:"danger","data-testid":"delete-modal-confirm",onClick:r,children:"Delete"}),(0,i.jsx)(s.Z,{variant:"secondary",onClick:n,children:"Cancel"})]})]})}},33293:function(e,t,n){n.d(t,{HF:function(){return l},bq:function(){return s}});var i=n(13623);let s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];try{"function"==typeof window.gtag&&gtag(e,...n)}catch(e){(0,i.Tb)(e)}},l=e=>{s("consent","update",r(e))},r=e=>({ad_personalization:e.marketing?"granted":"denied",ad_user_data:e.marketing?"granted":"denied",ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"})},48814:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(27573),s=n(82177),l=n(17886);let r={timeZoneName:"short",...s.ou.DATETIME_MED};function a(e){let{datetime:t}=e;return(0,i.jsx)(l.Z,{delayDuration:700,side:"bottom",tooltipContent:t.toLocaleString(r),children:(0,i.jsx)("span",{children:t.toRelative()})})}},17886:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(85565),s=n(27573),l=n(3520),r=n(12898),a=n(57908);function c(){let e=(0,i._)(["\n  px-2\n  py-1\n  text-xs\n  font-medium\n  font-sans\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-50\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return c=function(){return e},e}function o(e){let{children:t,tooltipContent:n,side:i="top",className:l,delayDuration:c=200,...o}=e;return(0,s.jsx)(r.zt,{delayDuration:c,children:(0,s.jsxs)(r.fC,{...o,children:[(0,s.jsx)(r.xz,{asChild:!0,children:t}),(0,s.jsx)(r.h_,{children:(0,s.jsx)(d,{className:(0,a.Z)(l,!n&&"hidden"),sideOffset:5,side:i,children:n})})]})})}let d=(0,l.Z)(r.VY)(c())},42152:function(e,t,n){n.d(t,{f:function(){return a},m:function(){return c}});var i=n(27573),s=n(71233),l=n(21484),r=n(7653);function a(e){let{didCopy:t,...n}=e;return t?(0,i.jsx)(s.f,{...n}):(0,i.jsx)(l.T,{...n})}function c(e){let[t,n]=(0,r.useState)(!1);return{didCopy:t,copyToClipboard:(0,r.useCallback)(()=>{navigator.clipboard.writeText(e.trim()).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)}).catch(e=>console.log("Something went wrong",e))},[e])}}},72001:function(e,t,n){n.d(t,{X:function(){return l},h:function(){return r}});let i=/<cite index="([^"]+)">([\s\S]*?)(<\/cite>|$)/g,s=/<c(?:i(?:t(?:e)?)?)?(?:\s+(?:index=(?:"[^"]*")?)?)?[^>]*$/;function l(e){let t;let n=[];for(;null!==(t=i.exec(e));){let[e,i]=t,s=i.split(",").map(e=>{let[t,n]=e.split("-",2).map(e=>parseInt(e,10));return[t,n]});n.push(...s)}return n}function r(e){return e.replace(i,"$2").replace(s,"")}}}]);